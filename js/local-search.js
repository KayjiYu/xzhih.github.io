var keepSearchData=function(){fetch("{{ config.root }}searchData.json").then(function(e){return e.json()}).then(function(e){localStorage.setItem("searchData",JSON.stringify(e))})},checkAndGetData=function(){fetch("{{ config.root }}searchVersion.txt?t="+ +new Date).then(function(e){return e.text()}).then(function(e){localStorage.getItem("searchVersion")!==e&&(localStorage.setItem("searchVersion",e),keepSearchData())}),searchFunc("local-search-input","local-search-result")},searchFunc=function(e,t){"use strict";var a=localStorage.getItem("searchData"),r=JSON.parse(a),n=document.getElementById(e);if(n){var c=document.getElementById(t);n.addEventListener("input",function(){"string"!=typeof a&&(a=localStorage.getItem("searchData"),r=JSON.parse(a));var e='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);c.innerHTML="",this.value.trim().length<=0||(r.forEach(function(a){var r=!0;a.title&&""!==a.title.trim()||(a.title="Untitled");var n=a.title.trim().toLowerCase(),c=a.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),s=a.url,i=-1,o=-1,l=-1;if(""!==c?t.forEach(function(e,t){i=n.indexOf(e),o=c.indexOf(e),i<0&&o<0?r=!1:(o<0&&(o=0),0==t&&(l=o))}):r=!1,r){e+="<li><a href='"+s+"' class='search-result-title'>"+n+"</a>";var h=a.content.trim().replace(/<[^>]+>/g,"");if(l>=0){var u=l-20,f=l+80;u<0&&(u=0),0==u&&(f=100),f>h.length&&(f=h.length);var g=h.substr(u,f);t.forEach(function(e){var t=new RegExp(e,"gi");g=g.replace(t,'<em class="search-keyword">'+e+"</em>")}),e+='<p class="search-result">'+g+"...</p>"}e+="</li>"}}),e+="</ul>",c.innerHTML=e)})}};checkAndGetData();